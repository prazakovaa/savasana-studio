<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Jógové studio</title>
  <link rel="stylesheet" href="/style.css">
  <script>
    const params = new URLSearchParams(window.location.hash.slice(1));
    const inviteToken = params.get("invite_token");
    if (inviteToken) {
      window.location.href = `/admin/#invite_token=${inviteToken}`;
    }
  </script>
</head>


<body>
  <p>Pro lidi se zájmem o zdravý pohyb</p>
  <h1>Šavásána studio</h1>
  <a class="btn btn--white" href="#">rezervace</a>
  <a class="btn btn--white" href="/aktuality.html">aktuality</a>



  <div id="posledni-aktualita"></div>
  <div class="only-desktop" id="posledni-aktuality"></div>

  <a class="btn btn--white only-mobile" href="/aktuality.html">aktuality</a>


<script>
  fetch('data/aktuality.json')
    .then(res => res.json())
    .then(data => {
      const container = document.getElementById('posledni-aktualita');

      if (data.length === 0) {
        container.textContent = 'Žádné aktuality.';
        return;
      }

      // Seřaď data podle data sestupně (nejnovější první)
      const sorted = data.sort((a, b) => new Date(b.date) - new Date(a.date));
      const nejnovejsi = sorted[0];

      const article = document.createElement('article');
      article.innerHTML = `<h2>${nejnovejsi.title}</h2><p><em>${nejnovejsi.date}</em></p>${nejnovejsi.contentHtml}`;
      container.appendChild(article);
    })
    .catch(err => {
      document.getElementById('posledni-aktualita').textContent = 'Nelze načíst aktuality.';
      console.error(err);
    });
</script>

<script>
  fetch('data/aktuality.json')
    .then(res => res.json())
    .then(data => {
      const container = document.getElementById('posledni-aktuality');

      if (data.length === 0) {
        container.textContent = 'Žádné aktuality.';
        return;
      }

      // Vezmi poslední 3 aktuality (od konce)
      const posledniTri = data.slice(-3).reverse(); // reverse = nejnovější nahoře

      posledniTri.forEach(item => {
        const article = document.createElement('article');
        article.innerHTML = `<h2>${item.title}</h2><p><em>${item.date}</em></p>${item.contentHtml}`;
        container.appendChild(article);
      });
    })
    .catch(err => {
      document.getElementById('posledni-aktuality').textContent = 'Nelze načíst aktuality.';
      console.error(err);
    });
</script>
</body>
</html>